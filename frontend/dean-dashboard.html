<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Dean Dashboard</title>
</head>
<body>
  <h2>Welcome to Dean Dashboard</h2>

  <button onclick="fetchData('students')">View All Students</button>
  <button onclick="fetchData('staff')">View All Staff</button>
  <button onclick="fetchData('hods')">View All HODs</button>

  <div id="tableContainer"></div>

  <script>
    function fetchData(type) {
      let url = '';
      if (type === 'students') url = 'http://localhost:8080/dean/students';
      else if (type === 'staff') url = 'http://localhost:8080/dean/staff';
      else if (type === 'hods') url = 'http://localhost:8080/dean/hods';

      fetch(url)
        .then(response => {
          if (!response.ok) {
            throw new Error('Failed to fetch data');
          }
          return response.json();
        })
        .then(data => {
          displayTable(data, type);
        })
        .catch(error => {
          document.getElementById('tableContainer').innerHTML = `<p style="color:red;">Error: ${error.message}</p>`;
        });
    }

    function displayTable(data, type) {
      if (data.length === 0) {
        document.getElementById('tableContainer').innerHTML = '<p>No records found.</p>';
        return;
      }

      let headers = Object.keys(data[0]);
      let table = '<table><thead><tr>';
      headers.forEach(header => {
        table += `<th>${header}</th>`;
      });
      table += '</tr></thead><tbody>';

      data.forEach(item => {
        table += '<tr>';
        headers.forEach(header => {
          table += `<td>${item[header]}</td>`;
        });
        table += '</tr>';
      });

      table += '</tbody></table>';
      document.getElementById('tableContainer').innerHTML = table;
    }
  </script>
</body>
</html>
